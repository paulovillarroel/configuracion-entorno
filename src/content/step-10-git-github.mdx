import Callout from '../components/Callout.astro';
import OsTabs from '../components/OsTabs.astro';

<Callout type="info" title="¬øQu√© es Git? (Explicaci√≥n para Humanos)">
  Git es como **Ctrl+Z con superpoderes para todo tu proyecto**. Cada vez que haces un "commit",
  Git toma una foto (snapshot) del estado completo de tus archivos. Puedes volver a cualquier foto anterior,
  ver qu√© cambi√≥ y cu√°ndo, y trabajar en paralelo sin miedo a romper nada.

  A diferencia de guardar archivos normalmente (que sobreescribe), Git **guarda el historial completo**.
  Es la diferencia entre tener un solo "Guardar" y tener una l√≠nea de tiempo infinita.
</Callout>

### El Flujo de Git

<div class="not-prose grid grid-cols-1 md:grid-cols-4 gap-2 mb-6 text-center text-sm">
  <div class="bg-amber-50 dark:bg-amber-950/30 p-3 rounded border border-amber-200 dark:border-amber-800">
    <span class="text-xl">üìù</span><br/>
    <strong>Working Directory</strong><br/>
    <span class="text-xs text-slate-500 dark:text-slate-400">Tus archivos editados</span>
  </div>
  <div class="bg-blue-50 dark:bg-blue-950/30 p-3 rounded border border-blue-200 dark:border-blue-800">
    <span class="text-xl">üì¶</span><br/>
    <strong>Staging Area</strong><br/>
    <span class="text-xs text-slate-500 dark:text-slate-400">Listos para foto</span>
  </div>
  <div class="bg-green-50 dark:bg-green-950/30 p-3 rounded border border-green-200 dark:border-green-800">
    <span class="text-xl">üíæ</span><br/>
    <strong>Repository Local</strong><br/>
    <span class="text-xs text-slate-500 dark:text-slate-400">Foto guardada</span>
  </div>
  <div class="bg-purple-50 dark:bg-purple-950/30 p-3 rounded border border-purple-200 dark:border-purple-800">
    <span class="text-xl">‚òÅÔ∏è</span><br/>
    <strong>GitHub</strong><br/>
    <span class="text-xs text-slate-500 dark:text-slate-400">Respaldo en la nube</span>
  </div>
</div>

<div class="not-prose flex items-center justify-center gap-1 text-xs text-slate-400 dark:text-slate-500 mb-6">
  <span>git add</span><span>‚Üí</span>
  <span>git commit</span><span>‚Üí</span>
  <span>git push</span><span>‚Üí</span>
  <span>‚òÅÔ∏è</span>
</div>

### Configuraci√≥n Inicial

En tu terminal, configura tu identidad (esto aparecer√° en cada commit):

```bash
git config --global user.name "Tu Nombre"
git config --global user.email "tu@email.com"
git config --global init.defaultBranch main
```

<Callout type="warning" title="Importante">
  Usa el mismo email que tienes (o tendr√°s) en tu cuenta de GitHub. Si no coinciden, tus commits no se vincular√°n a tu perfil y aparecer√°n como un usuario desconocido.
</Callout>

### Ejercicio Guiado: Tu Primer Repositorio

Ejecuta cada comando en tu terminal y observa qu√© pasa:

1. `mkdir && cd` ‚Äî Crear carpeta y entrar
2. `git init` ‚Äî Inicializar Git (crea la carpeta oculta .git)
3. `echo` ‚Äî Crear un archivo README
4. `git status` ‚Äî Ver estado: archivo "sin rastrear" (rojo)
5. `git add` ‚Äî Preparar para snapshot (mover a staging)
6. `git status` ‚Äî Ver estado: archivo en "staging" (verde)
7. `git commit` ‚Äî Tomar la foto (commit)
8. `git log` ‚Äî Ver el historial

```bash
mkdir mi-primer-repo && cd mi-primer-repo
git init
echo "# Mi Proyecto" > README.md
git status
git add README.md
git status
git commit -m "primer commit: agregar README"
git log
```

<OsTabs>
  <Fragment slot="win">
    <div class="prose prose-slate dark:prose-invert max-w-none">
      <Callout type="info" title="Nota Windows">
        Git se instal√≥ en el Paso 3 dentro de WSL. Todo lo de Git se hace desde la terminal de **Ubuntu**, no desde PowerShell.
      </Callout>

      #### Instalar GitHub CLI

      En tu terminal de **Ubuntu**:

      ```bash
      sudo apt install gh
      ```
    </div>
  </Fragment>
  <Fragment slot="mac">
    <div class="prose prose-slate dark:prose-invert max-w-none">
      <Callout type="info" title="Nota Mac">
        Git viene preinstalado o se instal√≥ con Homebrew en el Paso 3. Todo funciona directamente desde Terminal.
      </Callout>

      #### Instalar GitHub CLI

      ```bash
      brew install gh
      ```
    </div>
  </Fragment>
</OsTabs>

### Conectar con GitHub

1. Crea una cuenta en [github.com](https://github.com) (si no tienes una).
2. Autent√≠cate con GitHub CLI:

```bash
gh auth login
```

Te har√° 4 preguntas. Responde as√≠:

1. **Where do you use GitHub?** ‚Üí `GitHub.com`
2. **What is your preferred protocol?** ‚Üí `HTTPS`
3. **Authenticate Git with your GitHub credentials?** ‚Üí `Yes`
4. **How would you like to authenticate?** ‚Üí `Login with a web browser`

Se mostrar√° un **c√≥digo de 8 caracteres** en la terminal (ej: `A1B2-C3D4`) y se intentar√° abrir el navegador.

**Si el navegador no se abre autom√°ticamente** (com√∫n en WSL): copia el c√≥digo, abre manualmente [github.com/login/device](https://github.com/login/device) en tu navegador de Windows, pega el c√≥digo e inicia sesi√≥n.

3. Crea el repositorio y s√∫belo, todo desde la terminal:

```bash
cd mi-primer-repo
gh repo create mi-primer-repo --public --source=. --remote=origin --push
```

Esto crea el repo en GitHub, lo conecta y sube tu c√≥digo en un solo comando.

<details class="not-prose my-6 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700 group">
  <summary class="font-bold text-slate-700 dark:text-slate-300 cursor-pointer flex items-center gap-2 select-none p-4">
    <span class="group-open:rotate-90 transition-transform">‚ñ∂</span>
    Cheat Sheet: Comandos Git Esenciales
  </summary>
  <div class="p-4 pt-0">
    <div class="overflow-x-auto">
      <table class="w-full text-sm border border-slate-200 dark:border-slate-700 rounded">
        <thead class="bg-slate-100 dark:bg-slate-800">
          <tr>
            <th class="text-left px-3 py-2 border-b border-slate-200 dark:border-slate-700">Comando</th>
            <th class="text-left px-3 py-2 border-b border-slate-200 dark:border-slate-700">Qu√© hace</th>
          </tr>
        </thead>
        <tbody class="text-slate-600 dark:text-slate-400">
          <tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-3 py-2 font-mono">git status</td><td class="px-3 py-2">Ver qu√© archivos cambiaron</td></tr>
          <tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-3 py-2 font-mono">git add archivo</td><td class="px-3 py-2">Preparar archivo para commit</td></tr>
          <tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-3 py-2 font-mono">git add .</td><td class="px-3 py-2">Preparar TODOS los archivos</td></tr>
          <tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-3 py-2 font-mono">git commit -m "mensaje"</td><td class="px-3 py-2">Guardar snapshot con descripci√≥n</td></tr>
          <tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-3 py-2 font-mono">git push</td><td class="px-3 py-2">Subir commits a GitHub</td></tr>
          <tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-3 py-2 font-mono">git pull</td><td class="px-3 py-2">Descargar cambios de GitHub</td></tr>
          <tr><td class="px-3 py-2 font-mono">git log --oneline</td><td class="px-3 py-2">Ver historial compacto</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</details>

### Para Profundizar

<div class="not-prose grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
  <a href="https://learn.github.com/courses/introductiontoGit" target="_blank" rel="noopener noreferrer" class="block bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500 transition-colors no-underline">
    <p class="font-bold text-slate-800 dark:text-slate-200 mb-1">Introduction to Git</p>
    <p class="text-sm text-slate-500 dark:text-slate-400">Curso oficial de GitHub: fundamentos de control de versiones con Git desde cero.</p>
    <p class="text-xs text-blue-600 dark:text-blue-400 mt-2">learn.github.com ‚Üí</p>
  </a>
  <a href="https://learn.github.com/courses/introductiontoGitHub" target="_blank" rel="noopener noreferrer" class="block bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500 transition-colors no-underline">
    <p class="font-bold text-slate-800 dark:text-slate-200 mb-1">Introduction to GitHub</p>
    <p class="text-sm text-slate-500 dark:text-slate-400">Curso oficial de GitHub: colaboraci√≥n, repositorios, issues y pull requests.</p>
    <p class="text-xs text-blue-600 dark:text-blue-400 mt-2">learn.github.com ‚Üí</p>
  </a>
</div>
